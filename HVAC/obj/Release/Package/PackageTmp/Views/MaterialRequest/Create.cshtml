@model HVAC.Models.MaterialRequestVM

@{ ViewBag.pTitle = "Material Request";
    ViewBag.pageTitle = "Inventory";
    Layout = "~/Views/Shared/_Layout.cshtml"; }

@section styles{
    <link href="~/assets/libs/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
}

@using (Html.BeginForm("Create", "MaterialRequest", FormMethod.Post, new { @class = "needs-validation", @novalidate = "novalidate" }))
{
@Html.AntiForgeryToken()
                @Html.HiddenFor(model => model.MRequestID)
                                @Html.ValidationSummary(true)

                                                <div class="card">
                                                    <div class="card-body">

                                                        <div class="row">
                                                            <div class="col-md-8">
                                                                <div id="validations" style="color:red;margin-left:7px;display:none">* Please fill mandatory fields!</div>
                                                            </div>
                                                            <div class="col-md-4 text-md-end mb-1">

                                                                <button type="submit" class="btn btn-success" id="btnsave" tabindex="50">Save</button>

                                                                <a href='@Url.Action("Index", "MaterialRequest", new { id = 0 })' class="btn btn-secondary" data-toggle="tooltip" data-placement="right" title="Click here">Cancel</a>

                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-2">
                                                                @Html.HiddenFor(model => model.ProjectNo, new { @class = "form-control" })
                                                                @Html.HiddenFor(model => model.JobHandOverID, new { @class = "form-control" })
                                                                @Html.HiddenFor(model => model.JobPurchaseOrderDetailID, new { @class = "form-control" })
                                                                @Html.HiddenFor(model => model.PONO, new { @class = "form-control" })
                                                                <label class="col-form-label required">M.R No.</label>
                                                                @Html.TextBoxFor(model => model.MRNo, new { @class = "form-control", @required = "true", @readonly = "readonly", @tabindex = "1" })

                                                            </div>
                                                            <div class="col-md-2">

                                                                <label class="col-form-label">M.R Date</label>
                                                                <div class="docs-datepicker">
                                                                    <div class="input-group">
                                                                        <input type="text" class="form-control docs-date" name="MRDateString" id="MRDate" value="@(Model.MRDate != default(DateTime) ? Model.MRDate.ToString("dd/MM/yyyy") : "")"
                                                                               placeholder="Pick a date" autocomplete="off" tabindex="2">
                                                                        <button type="button"
                                                                                class="btn btn-secondary docs-datepicker-trigger">
                                                                            <i class="mdi mdi-calendar" aria-hidden="true"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div class="docs-datepicker-container"></div>
                                                                </div>

                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="col-form-label required">Select Project No.</label>

                                                                <select id="drpProjectNo" name="drpProjectNo" style="width:100%" class="form-control form-select select2"
                                                                        data-placeholder="Choose Project..." tabindex="3">
                                                                </select>

                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="col-form-label">Client PO</label>
                                                                <div class="input-group">
                                                                    <select id="drpClientPO" name="drpClientPO" style="width:75%" class="select2 form-select" data-placeholder="Choose Material Request..." tabindex="2"></select>
                                                                    <button type="button" class="btn btn-sm btn-success" id="btnShowMRDetails" style="" tabindex="4"> <i class="mdi mdi-refresh" style="font-size: 18px;"></i></button>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <label class="col-form-label required">Requested By</label>
                                                                @Html.DropDownListFor(mode => mode.RequestedBy, new SelectList(ViewBag.Employee, "ID", "Text"), "Select Engineer", new { @class = "form-select", @id = "RequestedBy", @required = "required", @tabindex = "5" })
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label class="col-form-label required">Store Keeper</label>
                                                                @Html.DropDownListFor(mode => mode.StoreKeeperID, new SelectList(ViewBag.Employee, "ID", "Text"), "Select Incharge", new { @class = "form-select", @id = "StoreKeeperID", @required = "required", @tabindex = "6" })
                                                            </div>
                                                            <div class="col-md-4">
                                                                <label class="col-form-label">Remarks</label>
                                                                <textarea id="Remarks" name="Remarks" class="form-control" rows="1" tabindex="7">@Model.Remarks</textarea>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div class="row">
                                                                            <div class="col-md-12" id="GRNContainer">
                                                                                @{Html.RenderPartial("DetailList", Model);}
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>}

@section scripts{
    <script src="~/Scripts/JS/MaterialRequest.js"></script>
    <script src="~/assets/libs/select2/js/select2.min.js"></script>
}

<script type="text/javascript">
    $(document).ready(function () {

        $('#MRDate').focus();
    });
</script>