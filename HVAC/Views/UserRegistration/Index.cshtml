@model List<HVAC.Models.UserRegistrationVM>

    @{
        ViewBag.Title = "List";
        ViewBag.pTitle = "User";
        ViewBag.pageTitle = "User";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <script type="text/javascript">

        $(document).ready(function () {

            $('#dataTables-example tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" />');
            });


            var table = $('#dataTables-example').DataTable({ "sPaginationType": "full_numbers" });

            table.columns().every(function () {
                var that = this;

                $('input', this.footer()).on('keyup change', function () {
                    if (that.search() !== this.value) {
                        that
                            .search(this.value)
                            .draw();
                    }
                });
            });



        });

    </script>

    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-md-3">
                    <div class="mb-2">
                        <label class="col-form-label">Role</label>
                        @Html.DropDownList("StatusId", new SelectList(@ViewBag.UserRole, "RoleID", "RoleName",@ViewBag.StatusId), null, new { @class = "form-select", @value = 1, @id = "RoleId",@width="250px" })
                    </div>
                </div>
                <div class="col-md-2 mt-2">
                    <div class="mb-2">
                        <button type="button" class="btn btn-success waves-effect waves-light filter btn_top" onclick="location.href='@Url.Action("Index", "UserRegistration")?RoleId=' + $('#RoleId').val() ">
                            <i class="bx bx-search mt-1" style="font-size: 21px;"></i>
                        </button>
                    </div>
                </div>
                <div class="col-md-7 text-md-end mt-2">
                    <div class="mb-2 btn_top">
                        <a  class="btn btn-primary waves-effect waves-light text-md-end" href="/UserRegistration/Create"><i class="mdi mdi-plus me-1"></i> New User</a>
                    </div>
                </div>
            </div>
       
    <div class="clearfix"></div>

        @if (TempData["SuccessMsg"] != null)
        {
            @*   <div class="alert alert-success alert-dismissable" role="alert" id="divMsgHeader" ng-show="SuccessAlert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                    <h4><i class="icon fa fa-check"></i>Alert!</h4>
                    <div id="divFinalMsg">@TempData["SuccessMsg"]</div>
                </div>*@
            <script type="text/javascript">
                 $(document).ready(function () {
                     //$.notify("@TempData["SuccessMsg"]", "success");
                      });
            </script>
        }
       <hr>
            <table class="table table-bordered mb-0" id="datatable" style="width:100%">
                <thead class="table-light">
                    <tr>
                        <th>User Name</th>
                        <th>Role</th>                       
                        <th>Email</th>
                        <th>IsActive</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="tdtarget">
                                @Html.DisplayFor(modelItem => item.UserName)
                            </td>
                            <td class="tdtarget">
                                @Html.DisplayFor(modelItem => item.RoleName)
                            </td>
                           
                            <td class="tdtarget">
                                @Html.DisplayFor(modelItem => item.EmailId)
                            </td>
                            <td style="text-align:center">
                                @Html.DisplayFor(modelItem => item.IsActive)
                            </td>
                            <td>
                                <div class="gap-3 d-flex">
                                    @* @Html.ActionLink("Edit", "Edit", new { id=item.RoleID }) |
                                        @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
                                        @Html.ActionLink("Delete", "Delete", new { id=item.RoleID })*@

                                    <a href="@Url.Action("Create", new { id = item.UserID })" class="text-success"><i class="mdi mdi-pencil font-size-18"></i></a> 
                                    @*<a href="@Url.Action("Delete", new { id = item.RoleID })"><i class="fa fa-times"></i></a>*@
                                    <a href="#" onclick="Delete(ID=@item.UserID)" class="text-danger"><i class="mdi mdi-delete font-size-18"></i></a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>

            </table>
        </div>

    </div> 
    

   


    <script type="text/javascript">
        // function Delete(ID) {
        //     if (confirm("Are you sure, You want to Delete User?")) {
        //         window.location.href = "/UserRegistration/Delete/?id=" + ID;
        //     }
        // }

            function Delete(ID) {
        Swal.fire({ title: "Are you sure?", text: "Do you want to delete this?", icon: "warning", showCancelButton: !0, confirmButtonColor: "#34c38f", cancelButtonColor: "#f46a6a", confirmButtonText: "Yes, delete it!" }).then(
            function (t) {
                if (t.value) {
                    // $.ajax({
                    //     type: "POST",
                    //     url: '/UserRegistration/DeleteConfirmed',
                    //     datatype: "html",
                    //     data: {
                    //         'id': ID
                    //     },
                    //     success: function (response) {
                    //         if (response.status == "OK") {
                    //             Swal.fire("Delete Status!", response.message, "success");
                    //             window.location.reload();
                    //         }
                    //         else {
                    //             Swal.fire("Delete Status!", response.message, "error");
                    //         }
                    //     }
                    // });
                }
            });
        }
    </script>
